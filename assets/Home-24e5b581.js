import{u as G}from"./list-2a45c0be.js";import{u as W}from"./settings-7fe00aa6.js";import{g as j,o as q,a as L,b as M,n as H,u as U,r as b,w as R,c as A,s as x,d as S,e as $,f as y,h as T,V as z,i as V,t as P,j as C,k as N,l as _}from"./index-acf4c2fa.js";import{V as J,a as E}from"./VRow-76678498.js";function I(t){return j()?(q(t),!0):!1}function k(){const t=new Set,n=r=>{t.delete(r)};return{on:r=>{t.add(r);const a=()=>n(r);return I(a),{off:a}},off:n,trigger:r=>Promise.all(Array.from(t).map(a=>a(r)))}}function B(t){return typeof t=="function"?t():U(t)}const K=typeof window<"u",Q=()=>{};function X(t,n=!0){L()?M(t):n?t():H(t)}function Y(t){var n;const o=B(t);return(n=o==null?void 0:o.$el)!=null?n:o}const D=K?window:void 0;function Z(...t){let n,o,e,r;if(typeof t[0]=="string"||Array.isArray(t[0])?([o,e,r]=t,n=D):[n,o,e,r]=t,!n)return Q;Array.isArray(o)||(o=[o]),Array.isArray(e)||(e=[e]);const a=[],f=()=>{a.forEach(u=>u()),a.length=0},m=(u,s,i,c)=>(u.addEventListener(s,i,c),()=>u.removeEventListener(s,i,c)),g=R(()=>[Y(n),B(r)],([u,s])=>{f(),u&&a.push(...o.flatMap(i=>e.map(c=>m(u,i,c,s))))},{immediate:!0,flush:"post"}),v=()=>{g(),f()};return I(v),v}function tt(){const t=b(!1);return L()&&M(()=>{t.value=!0}),t}function et(t){const n=tt();return A(()=>(n.value,!!t()))}function nt(t={}){const{window:n=D}=t,o=et(()=>!!n&&"Notification"in n),e=b(null),r=async()=>{o.value&&"permission"in Notification&&Notification.permission!=="denied"&&await Notification.requestPermission()},{on:a,trigger:f}=k(),{on:m,trigger:g}=k(),{on:v,trigger:u}=k(),{on:s,trigger:i}=k(),c=async l=>{if(!o.value)return;await r();const p=Object.assign({},t,l);return e.value=new Notification(p.title||"",p),e.value.onclick=f,e.value.onshow=g,e.value.onerror=u,e.value.onclose=i,e.value},d=()=>{e.value&&e.value.close(),e.value=null};if(X(async()=>{o.value&&await r()}),I(d),o.value&&n){const l=n.document;Z(l,"visibilitychange",p=>{p.preventDefault(),l.visibilityState==="visible"&&d()})}return{isSupported:o,notification:e,show:c,close:d,onClick:a,onShow:m,onError:v,onClose:s}}const ot={class:"background",style:{background:"#FFFDE7",height:"100vh"}},ut={__name:"Home",setup(t){const n=G(),{items:o,currentItem:e,timeleft:r}=x(n),{countdown:a,setCurrentItem:f,setFinishItem:m}=n,g=W(),{selectedAlarmFile:v,notify:u}=x(g),s={STOP:0,COUNTING:1,PAUSE:2},i=b(s.STOP);let c=0;const d=()=>{i.value===s.STOP&&o.value.length>0&&f(),e.value.length!==0&&(i.value=s.COUNTING,c=setInterval(()=>{a(),r.value===0&&l()},1e3))},l=()=>{clearInterval(c),i.value=s.STOP;const h=new Audio;if(h.src=v.value,h.play(),u.value){const{show:w}=nt({title:"WELL DONE!!!",body:O.value,icon:"http://github.com/wdaweb.png"});w()}m(),o.value.length>0&&d()},p=()=>{i.value=s.PAUSE,clearInterval(c)},O=A(()=>e.value.length>0?e.value:o.value.length>0?"Click To Start":"Empty List"),F=A(()=>{const h=Math.floor(r.value/60).toString().padStart(2,"0"),w=(r.value%60).toString().padStart(2,"0");return h+":"+w});return(h,w)=>(S(),$("div",ot,[y(z,null,{default:T(()=>[y(J,{class:"text-center",style:{color:"#757575"}},{default:T(()=>[y(E,{cols:"12"}),y(E,{cols:"12"},{default:T(()=>[V("h1",null,P(O.value),1),V("h1",null,P(F.value),1)]),_:1}),y(E,{cols:"12"},{default:T(()=>[i.value!==s.COUNTING?(S(),C(_,{key:0,variant:"text",icon:"mdi-play",onClick:d})):N("",!0),i.value===s.COUNTING?(S(),C(_,{key:1,variant:"text",icon:"mdi-pause",onClick:p})):N("",!0),U(e).length>0?(S(),C(_,{key:2,variant:" text",icon:"mdi-skip-next",onClick:l})):N("",!0)]),_:1})]),_:1})]),_:1})]))}};export{ut as default};
